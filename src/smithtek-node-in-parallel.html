<script type="text/x-red" data-template-name="SmithTek In Parallel">
    <div class="form-row ">
        <label for="node-input-serial"><i class="fa fa-random"></i> <span data-i18n="smithtek.label.serial"></span></label>
        <input type="text" id="node-input-serial">
    </div>
    <div class="form-row node-input-header">
        <label for="node-input-header"> Header(hex) 0x</label>
        <input type="text" id="node-input-header" />
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
    <input type="hidden" id="node-input-format" />
</script>

<script type="text/x-red" data-help-name="SmithTek In Parallel">
    <p>Reads data SmithTek node.</p>

</script>

<script type="text/javascript">

  let format =
  //         [
  //     {"type": "int32_t", "key": "v1"},
  //     {"type": "PacketDigitalBinaryElement", "key": "b1", "label":"Flag 1"},
  //     {"type": "PacketDigitalBinaryElement", "key": "b2"},
  //     {"type": "PacketMarkerBinaryElement", "key": "m1", "len":7, "value": [1,2,3,4,5,255,255]},
  //     {"type": "float", "key": "f1" },
  //     {"type": "PacketDigitalBinaryElement", "key": "b3"},
  //     {"type": "TColor", "key": "color1"},
  //     {"type": "TRGBWColor", "key": "color2"},
  //     {"type": "TDateTime", "key": "time1"}
  // ]

          [
          {"type": "float", "key": "gps_lat", "label": "GPS Lat"},
          {"type": "float", "key": "gps_lon", "label": "GPS Lon"},
          {"type": "float", "key": "batt_voltage", "label": "Battary Voltage"},
          {"type": "float", "key": "analog_in_1", "label": "Analog input 1"},
          {"type": "float", "key": "analog_in_2", "label": "Analog input 2"},
          {"type": "float", "key": "analog_in_3", "label": "Analog input 3"},
          {"type": "float", "key": "analog_in_4", "label": "Analog input 4"},
          {"type": "float", "key": "analog_in_5", "label": "Analog input 5"},
          {"type": "float", "key": "analog_in_6", "label": "Analog input 6"},
          {"type": "PacketDigitalBinaryElement", "key": "digital_input_1", "label": "Digital input 1"},
          {"type": "PacketDigitalBinaryElement", "key": "digital_input_2", "label": "Digital input 2"},
          {"type": "PacketDigitalBinaryElement", "key": "digital_input_3", "label": "Digital input 3"},
          {"type": "PacketDigitalBinaryElement", "key": "digital_input_4", "label": "Digital input 4"},
          {"type": "PacketDigitalBinaryElement", "key": "digital_input_5", "label": "Digital input 5"},
          {"type": "PacketDigitalBinaryElement", "key": "digital_input_6", "label": "Digital input 6"},
          {"type": "PacketDigitalBinaryElement", "key": "digital_output_1", "label": "Digital output 1"},
          {"type": "PacketDigitalBinaryElement", "key": "digital_output_2", "label": "Digital output 2"},
          {"type": "PacketDigitalBinaryElement", "key": "digital_output_3", "label": "Digital output 3"},
          {"type": "PacketDigitalBinaryElement", "key": "digital_output_6", "label": "Digital output 4"},
          {"type": "PacketDigitalBinaryElement", "key": "digital_output_5", "label": "Digital output 5"},
          {"type": "PacketDigitalBinaryElement", "key": "digital_output_6", "label": "Digital output 6"},
          {"type": "float", "key": "pulse_meter", "label": "Pulse Meter"}
      ]

  ;
  RED.nodes.registerType('SmithTek In Parallel',{
    category: 'SmithTek',
    defaults: {
        name: {value: "in"},
        serial: {type: "smithtek-serial-port",required:true},
        header: { value :""},




    },


    color:"BurlyWood",
    inputs:0,
    format: format ,

      outputs: format.length,
      outputLabels: (function(format) {return function(index) {
          if(format[index].label) {
              return format[index].label;
          } else {
              return "";
          }
      }})(format),


      icon: "smithtek.png",
    label: function() {
      var SmithtekNodeInParallel = RED.nodes.node(this['smithtek-node-in-parallel']);
      return this.name||(SmithtekNodeInParallel?SmithtekNodeInParallel.label().split(":")[0]:this._("smithtek.label.nodein"));
    },
    labelStyle: function() {
      return this.name?"node_label_italic":"";
    }
  });
</script>
